# ISegaro

## چطوری بهترین سرور مجازی رو انتخاب کنیم ؟

اگه سرور مجازی میخرید خوندن مطلب زیر خالی از لطف نیست و امیدوارم که کاربردی باشه , دوست داشتید نظرتونو بگید و همچنین تست های خودتون و اسم پروایدری که خرید کردید رو با بقیه به اشتراک بزارید همینجا

سلام چطورید خوبید , من سگارو هستم بریم باهم ببینیم چطوری یک سرور خوب بخریم
اگه این مطلب رو میخورید من فقط در شبکه ایکس حضور دارم با ای دی جدید و هیچ جای دیگه ای هیچ فعالیتی ندارم و ادرسش این زیر هست :

https://x.com/iSegar0

یک نکته همین اول : این مطلب هیچ ربطی به آموزش دور زدن فیلتر نداره , صرفا یک مطلب درباره انتخاب درست سرور هست , در حال حاضر هم خرید و فروش سرور به صورت قانونی در ایران امکان پذیر هست و شما با همین راهنما میتونید از پروایدر های ایرانی هم سرور تهیه کنید !! (فردا باز نیاید منو تو گونی ببرید)

معیار انتخاب خرید سرور برای شما چیه ؟ لوکیشن(کشور) ؟ قیمت ؟ سخت افزار ؟ پهنای باند ؟ بنظرتون کدومش باید اولویت باشه؟

برای خود من اول لوکیشن مهم هست , بعد پهنای باند و در اخر قیمت و ... اگر از لوکیشن صرف نظر کنیم , پهنای باند به نظر من یکی از مهمترین معیار های انتخاب سرور برای کاری هست که ما میخوایم بکنیم :D
یعنی باید بتونیم ازون سرور به بهترین و بالاترین کیفیت کاربکشیم اگه شما یه سرور خیلی خفن بخرید ولی پهنای باند و شبکه اون به درستی پیکربندی نشده باشه عملا هیچ استفاده ی درستی ازون ندارید

اصلا چرا دارم این مطلب رو مینویسم ؟ تا اخر بخونید چون قراره عشق کنید :))

وقتی شما یک سرور میخرید اون سرور باید به اصطلاح پورتی که باز کرده بهترین پهنای باند رو داشته باشه , خیلیاتون رفتید سرور خریدید که زده مثلا 100 مگابیت!! یا 1گیگابیت !! یا 10گیگابیت !! اینا رو میدونی یعنی چی دیگه ؟ به صورتی که بخوام بگم راحت درک کنید تقسیم به 8 کنید , چرا 8 چون هر بایت 8بیت هست , یعنی اینکه شما یه سرور خریدید که نوشته پورت 100مگابیت داره یعنی عملا به شما نیمتونه سرعت اپلود و دانلودی بیشتر از 12.5 مگابایت در ثانیه بده !! چیشد اینجا چرا گفتی مگابایت ؟
در عالم کامپیوتر برای بیان سرعت از عبارت مگابیت و برای حجم فایل از مگابایت استفاده میکنیم , جمله بالا یعنی با اون سرور که پورت 100مگابیت داره با حداکثر پهنای باندش فایل دانلود کنید یک فایل مثلا 100مگابایتی حدود 8ثانیه زمان میبره ولی همیشه اینطور نیست یعنی هیچوقت نیمتونید بهینه ترین سرعت رو دریافت کنید!
حالا گیریم شما یه سرور دارید مثل همین سرورهای 1یورویی ایزا که قبلا معرفی کردم و هنوزم هست میتونید از لینک زیر خرید کنید , از منم حمایت میکنید اگه از همین لینک خرید کنید هردو 15% بونوس میگیریم

https://aeza.net/?ref=387569

خوب ما یه سرور 1 یورویی از ایزا داریم که نوشته 100مگابیت پهنای باند !! اما اینطور نیست این سرور سرعت 250مگابیت داره میتونید از لینک زیر ببینید مخصوصا اپلودش به سمت تهران !!! از دستش ندید

https://www.speedtest.net/result/c/a753be80-b1ee-4058-9230-20a380e31a29

جالب شد نع ؟ سرور ارزون با پهنای باند عالی , اما هنوز مونده چیزی که میخام بگم

خوب فرضا ما همین سرور رو داریم اگه برای مصرف خونگی و دوست اشنا استفاده میکنید ازش مطلب زیر رو بخونید جالبه براتون و شاید کمک کنه انتخاب بهتری داشته باشید , خوب ما این سرور رو داریم , چند نفر میتونن ازش استفاده کنند ؟ این سرور ارزونه اگه ترافیک کاربرای زیادی بیاد روش مشکل براش پیش میاد چیکار باید بکنیم ؟

ما این سرور رو در اختیار مثلا 10نفر اعضای خانواده و دوست دادیم اینا که همه سرعت یکسان و مصرف یکسان ندارند چه اتفاقی میوفته ؟

سناریو بنویسیم , اقا این سرور رو دادیم دست 10 نفر , 2نفرشون با فیبر نوری بهش وصل هستند , 5نفر با موبایل و 3نفر هم با ADSL تخمی :))
خوب اگه دونفر ازین 10 نفر که فرضا مثلا یکنفر فیبر نوری دار و یکنفر کاربر موبایل باشه و بیان ازین سرور همزمان استفاده سنگین کنند مثل دانلود فایل یا استریم ویدیو , فاتحع بقیه مشکل میخورن چرا ؟ ببینید وقتی روی یک سروری کاربرها دارن مثلا اینستاگرام رو باهاش چرخ میزنن این رد و بدل شدن اطلاعات دایم نیست , یعنی یه ویدیو رو مثلا در حد 1 2 ثانیه لود میکنه و شما اون ویدیو رو که تایم مثلا 20ثانیه هست نگا میکنید و در این مدت 20ثانیه باقی کاربرها هم همینطوری هی اطلاعات رد و بدل میکنن و مشکلی اینجا پیش نمیاد خیلی چون یجورایی داریم با صف پیش میریم و سی پی یو سرور هم داره بدون مشکل درخواست هارو رد میکنه و پهنای باندم درگیر نشده , اما حالا این وسط یکنفر میاد و یه فیلم 2گیگابایتی رو میزاره دانلود !! روی فیبر نوری هم هست ! خوب سرعت فیبرم که خیلی بیشتره میتونه حداقل تا 50مگابایت/ثانیه بگیره , سرور ما پهنای باندش پقدر بود؟ 12.5 مگابایت , داره به صورت مداوم و بدون وقفه هم فیلم رو هم دانلود میکنه , اول لود سی پی یو میچسبه بالا فول چون دارم به صورت مداوم و بی وقفه عملیات رمزنگاری و پردازش انجام میده , دوم پهنای باند رو تا هرجا که میتونی از سرور میکشه سمت خودش و باقی کاربرها رو اذیت میکنه و به قولی بهشون اینترنت نمیرسه یا سرعتشون کم میشه !!

خوب تا اینجا چی دستگیرتون شد ؟ نکته مهمتر چیه ؟ 

وقتی شما از یک سرور مجازی دارید مثلا باهاش اینستاگرام رو لود میکنید , چه اتفاقی میوفته ؟ شما از تهران یه درخواست میزنید به سرور که برو این محتوا از اینستاگرام رو برای من لود کن , سرور که فرضا لوکیشنش اروپا هست , میره از نزدیکترین سرورهای اینستاگرام (CDN)محتوا رو میگیره میاره روی خودش و حالا برای شما اپلود میکنه به سمت تهران , جالب اینجاست , چی ؟ ما که میدونیم تو خارج از ایران اینترنتشون مثل ما شخمی نیست و اختلال و کوفت ندارن , پس سرعت دانلودشون باید خیلی خوب باشه , یعنی سرور ما با بیشترین سرعت میتونه محتوا رو دانلود کنه , اما اما ایا با بیشترین سرعت هم برای ما اپلود میکنه ؟ اینجا میخواستم برسم دقیق

یعنی ملاک شما برای انتخاب سرور بجز لوکیشین بنظرم باید سرعت اپلود سروربه سمت تهران باشه , یعنی بتونه هر محتوایی که خواستید رو با بالاترین سرعت بفرسته روی شبکه ایران , پیدا کردن سرور اینطوری خیلی سخته , قول میدم خیلی سخت !

یعنی باید ملاکتون عوض بشه برای انتخاب سرور ازین به بعد , حالا چطوری اقا چک کنیم این سروری که خریدیم سرعتش چطوره یا بهترین پروایدر چی هست ؟

من یه بررسی انجام دادم روی پروایدرهای بزرگ ایزا , هتزنر,امازون اروپا,لایتنود,لی نود,دیجیتال اوشن و رک نرد ... اطلاعاتش رو میزارم خودتون برید تست کنید
یه صحبتی هم با مدیرهای ایزا کردم و نتیجه چی شد ؟ همین که میبینید با سند و مدرک , این مطلب تبلیغاتی یا سفارشی یا پولی نیستا

نتیجه اینکه مدیرهای ایزا اومدن با تغیراتی که توی پیکربندی شبکشون انجام دادن بهترین و با کیفیت ترین پهنای باندی که میشه تو پروایدر های بزرگ به سمت تهران داد رو به وجود اوردن مخصوصا روی سرور های روسی ! بجز سرور پرومو استکهلم که 1یورویی هست و پورت اسمی 100مگابیتی داره ولی در عمل 250مگابیتی هست باقی لوکیشن های اروپایی اونها مجهز به پورت 1گیگابیتی هستند و 3 لوکیشن اصلی اونها یعنی سرورهای آلمان و روسیه(سنت پترزبورگ و مسکو) دارای پورت 25گیگابیتی !!!

اگه خواستید سرور روسی تهیه کنید حتما حتما اول به صورت ساعتی بگیرید بعد که مشکلی از لحاظ ای پی و تحریم نبود به صورت ماهیانه بخریدش و نگهش دارید چون ای پی هایی که روی روسیه الان باز کردن فعلا مشکلی ندارند

مگه داریم ؟ بله داریم میتونید برید چک کنید با لینک زیر ثبتنام کنید و برید ببینید 

https://aeza.net/?ref=387569

یعنی چی ؟ عکس زیر رو ببینیم , اولین و سبک و ارزونترین پلن سرور روسی که میشه انتخاب کرد

اینجا تست اپلود و دانلود از ارزونترین سرور روسی به سمت تهران هست بهترین کیفیت رو داره میده , من بیش از 50 تست مختلف گرفتم از اپلود و دانلود و پینگ و پکت لاست از پروایدر های مختلف به سمت تهران و به سمت کشورهای دیگه ببینم چقدر فاصله دارن , مثلا پیش اومده که روی دیجیتال اوشن دانلودش از تهران تا 4گیگابیت هم رفته ولی اپلودش 60مگابیت بوده !! یعنی اون سرور اصن اپلودی به سمت تهران نداشته

خوب میخاید ببینید خودتون چطوری روی سرورهاتون تست بگیرید ؟ یا اگه خریدید چطوری تست کنید بیاید باهم انجام بدیم , اول از همه لینک زیر رو بازکنید

https://www.speedtest.net/api/js/servers?engine=js&search=tehran&https_functional=true&limit=100

لینک زیر مشخصات سرورهای اسپیدتست در تهران هست مثل عکس زیر ما نیاز به ای دی یکی ازین سرور ها داریم که خودتون انتخاب میکنید , ولی بهترینش از نظر من پتیاک و میهن هاست و الکترو هستند که تو تصویر مشخص کردم

بعدش چی کنیم ؟ روی سرور که خریدید از هرکجا که هست دو دستور زیر رو اول بزنید تا پیشنیاز ها رو نصب کنید

curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | sudo bash

sudo apt-get install speedtest

وقتی دوتا دستور بالا رو زدید و نصب تموم شد حالا میریم برای تست سرعت به صورت هیومن ریدبل , یعنی همونی که میخایم دقیق به صورت مگابایت !! دقت کنید مگابیت نیستا , مگابایت یعنی تقسیم به 8 شده و این دقیقا اون سرعت خالص روی سرور ما به سمت تهران و از تهران هست , دستور زیر رو بزنید

speedtest -s 61159 -u MB/s
 تست با سرور الکترو تهران

سرور الکترو ای دی 61159 هست و پتیاک 40164 و میهن 7725 هست که با هر سه تست کنید که نتایج مقداری متفاوت هست میتونید میانگینش رو خودتون حساب کنید

خوب منم نتایج خودمون در انتهای همین مطلب میزارم ببینید بد نیست , حالا اینکارو کردیم خوب که چه ؟ حالا رسیدیم اصل مطلب چیکار کنیم که از بیشترین پهنای باند کاربرانمون استفاده کنند و همچنین سرورمون اورلود نشه

من خودم شخصا الان یک سرور روسی خریدم و نگه میدارم , الان میگید خوب این سرورها تحریمن یا سایتی باز نمیکنن یا تو روسیه هم فیلترینگ هست , روی سروری که من خریدم همچین چیزی اصلا نیست و خیلی جالبه شمام امتحان کنید و نکته مهمتر , ای پی که من از سرور روسیه گرفتم متعلق به ای اس پی رایاسپهر ویرا دیتا هست !! وات د فاک , داره میگه این ای پی متعلق به یه شرکت ایرانی و سنگاپوری هست و ... (ممکنه قبلا این رجیستر ای پی دست شرکت ایرانی بوده یا اطلاعات بروز نشدن و قدیمی باشن)اصن برام مهم نیست کجاییه فقط همین که هرسایتی و سرویسی میخام بازکنه بهترین اپلودم به سمت تهران داشته باشه با کمترین قیمت , همینو نگه داشتم برای خودم ببینید

خوب حالا چیکار کنیم ؟ هرسرور از هرجایی که شما خریدید رو چطور میدید دست کاربرانتون ؟ همینطوری یه کانفیگ میزنید و بفرما ؟ مشکلات بالا که گفتیم پیش میاد اما بیایم یه کار دیگه کنیم بریم یه QoS بزنیم , یعنی چی ؟ دیگه معنیش مشخصه کوالیتی اف سرویس , بیایم یکار کنیم عدل و انصاف رعایت بشه همه باهم یه اندازه مصرف کنن , به همه همه چیز برسه سیستم کمونیستی دیگه :))

میخایم یکاری کنیم فرض میگیرم اقا سرعت اپلود سرور شما به سمت تهران به صورت هیومن ریدبل (قابل خوانش توسط انسان :))) مثلا مثل همین سرور روسی من میشه 157 مگابایت , دقت کنید 157 مگابایت خالص , یعنی با فیبر نوری از خونم میتونم اگه یاری کنه تا ثانیه ای 157 مگابایت به صورت خالص بگیرم از سرورم , یعنی سرور روسیم برای من اپلود میکنه و از اینطرف دانلود میکنم , که خوب تو ایران محاله :)) ولی حالا ادامش

این 157 مگابایت رو به چند نفر میتونم بدم ؟ چطوری بدم مشکلی پیش نیاد ؟ نیاز چقدره؟ من برای هر کاربری که میخاد به این سرور وصل بشه سرعت 5مگابایت خالص رو میخام تخصیص بدم , یعنی 157 تقسیم بر 5 میشه حدود 32 کاربر به صورت همزمان که دانلود میکنن !! که خوب همه همزمان نیستند پس میشه تا دوبرابر هم روش کاربر ریخت حتی بیشتر یعنی حدود 65 نفر !! ترافیک با کیفیت دریافت میکنند بدون اینکه مصرف زیاد یکی باعث بشه بقیه مشکلی براشون پیش بیاد , حالا شاید همزمان اینهمه کاربر نبودن و اصلا خودم تنها بودن چرا باید محدود به 5 مگابایت باشم ؟ یکار میکنیم که ترافیک تا 157 مگابایت در دسترس باشه یعنی اگه تنها بودی تا هر مقداری که سرورت یاری میکنه بکشی و به ازای هر کاربری که اضافه میشه 5مگابایت از ظرفیت کم میشه و اگر اونم تمام کمال بخواد بکشه تقسیم به دو میشه و همینطور هی کمتر , یعنی این پهنای باند به صورت داینامیک تقسیم میشه که هم بیشترین پهنای باند رو داشته باشیم و اگه کاربرها هم زیادشدن بازم بهترین کیفیت رو بگیری ع این اتفاق باعث میشه هم سی پی یو اورلود نکنه در مواقعی که کاربرهای زیادی دارید هم با کیفیترین سرویس رو همگی دریافت کنید دستوراتش به ترتیب به صورت زیر هست , هرجا هم که مشکل خوردید دیگه انواع و اقسام هوش مصنوعی ها هستند کافیه خطایی گرفتید یا اطلاعات بیشتری نیاز داشتید همون رو به هوش مصنوعی بدید به فارسی و ازش توضیح بخاید , حتی بخشی از متن من رو بهش بدی بگی بیشتر توضیح بده تا متوجه منظورم بشید (اینترفیس اینترنت من روی سرور eth0 هست) 

 نصب پکیج
sudo apt install iproute2

  پاک کردن تنظیمات قبلی
tc qdisc del dev eth0 root

  تعریف صف اصلی
tc qdisc add dev eth0 root handle 1: htb default 30

  تعریف کلاس اصلی
tc class add dev eth0 parent 1: classid 1:1 htb rate 157mbit ceil 157mbit

  تعریف کلاس فرزند برای کاربران
tc class add dev eth0 parent 1:1 classid 1:10 htb rate 5mbit ceil 157mbit

  تخصیص صف منصفانه به کاربران
tc qdisc add dev eth0 parent 1:10 handle 10: fq_codel

  اعمال فیلتر عمومی
tc filter add dev eth0 protocol ip parent 1:0 prio 1 u32 match ip src 0.0.0.0/0 flowid 1:10

دستورات به انگلیسی رو به ترتیب بزنید بیاید پایین با این تفاوت که مقدار 157 و 5 رو باید بسته به انتخابتون تغییر بدید , این 157 از کجا اومده ؟ تو همون تست سرور روسی من 1257 مگابیت سرعت اپلودم بود که تقسیم به 8 کردم شد 157 , حله ؟
خوب بود چیزی یاد گرفتید راضی بودید نظرتونو بهم بگید , همچنین اگه میخاید که ادامه بدم مطلب نوشتن از این دست موارد رو میتونید سرور خواستید بخرید از لینک زیر بخرید هم از من حمایت کردید چون بونوس میگیرم و هزینه سرورهای خودم کمتر میشه هم تشویق میشم بیشتر بنویسیم خیلی مخلصیم

دیتا سنتر ایزا هم بهرین قیمت رو داره هم پهنای باند ترافیکی نامحدود داره هم به صورت ساعتی میتونید تهیه کنید و هم روش های پرداخت مختلف داره که یک گزینه ایده عال برای ما کاربرای ایرانیه

https://aeza.net/?ref=387569

اگه خواستید سرور روسی تهیه کنید حتما حتما اول به صورت ساعتی بگیرید بعد که مشکلی از لحاظ ای پی و تحریم نبود به صورت ماهیانه بخریدش و نگهش دارید چون ای پی هایی که روی روسیه الان باز کردن فعلا مشکلی ندارند


اینم لیست تست هایی که انجام دادم روی سرورهایی که داشتم و تهیه کردم میتونید نتایجش رو ببینید 



Aeza RU25GB

https://www.speedtest.net/result/c/38c4e14d-81f1-4af7-ac95-52957efbea30

https://www.speedtest.net/result/c/dee61590-80fe-431d-bedf-8a08c3c8250b

https://www.speedtest.net/result/c/80ee4e15-1a36-4816-8a24-f8254b7f6a53

https://www.speedtest.net/result/c/a4b4efbd-ed29-4b3f-88da-9ff8eedd28ff


Aeza ST

https://www.speedtest.net/result/c/4a794434-57a5-4e50-8b34-c16cf7fd68ad

https://www.speedtest.net/result/c/ed785ebc-1d5b-47ae-9d6b-ca3ead9f4e75

https://www.speedtest.net/result/c/0665e257-e551-47f7-ac24-688d3afb2e75

https://www.speedtest.net/result/c/e5af1c87-a2b4-4ab7-995d-e74199589726


ReckNeard

https://www.speedtest.net/result/c/0a17592d-ed20-4895-867f-c1a3d8ff6baf

https://www.speedtest.net/result/c/b7240261-d54c-4d50-9018-d5589949559d

https://www.speedtest.net/result/c/2dc4ef71-79b6-40db-bd4b-4288be0f6e09


AlexHost ML

https://www.speedtest.net/result/c/e687b94f-980d-4548-b91e-74a044441dec

https://www.speedtest.net/result/c/0c09de3a-78ed-461d-9de4-cd7e34396245

https://www.speedtest.net/result/c/5284a3a9-e3cf-4930-af57-71991f0696ee


Aeza RU25GB

https://www.speedtest.net/result/c/b5a24d80-d0e8-4159-8cdd-9753f8b30460

https://www.speedtest.net/result/c/8d55106e-9962-4014-840a-b503aa9a8033

https://www.speedtest.net/result/c/380928d1-145f-4ffa-b8c1-2b7f6a3ddc15

https://www.speedtest.net/result/c/b1ff4605-8f2c-4fcf-b91c-860bfc949fe1

https://www.speedtest.net/result/c/ecadbf65-a3c8-4bfb-a2ed-11aa48384857

https://www.speedtest.net/result/c/5f262b88-a6e7-48fa-a76c-6d0f504e840d


Hetzner

https://www.speedtest.net/result/c/b2254456-853e-4978-88d8-1284b8ef71b1

https://www.speedtest.net/result/c/76b69e75-12c5-41a9-be3a-01a0e4758589


Amazon DE

https://www.speedtest.net/result/c/6af4fe6e-dfb6-492e-add6-db48d986b3b9

https://www.speedtest.net/result/c/f5b43a41-f778-4910-ad22-8cc9aa8cf644

https://www.speedtest.net/result/c/4907a61a-f1b3-4840-968f-63c286be3b9a


Vulter

https://www.speedtest.net/result/c/b50f4dbf-f13b-40e9-a554-73bb44731908

https://www.speedtest.net/result/c/532401bf-78e5-4a59-8971-62f3b6c5fc4e

https://www.speedtest.net/result/c/63cbedf8-a716-45bd-b735-63ad4c2147a1


DigitalOcean

https://www.speedtest.net/result/c/523ad81a-d72d-42cc-a309-36ae9bfd8498

https://www.speedtest.net/result/c/373dd6fe-8b80-4248-9038-2d1a98f17f13

https://www.speedtest.net/result/c/ce959e9f-5c3d-43be-a093-9b2a9c35c1a0


LiNode

https://www.speedtest.net/result/c/e6df9aa5-583a-4580-b634-8a855694b208

https://www.speedtest.net/result/c/d8c0bc0a-676a-468c-8212-9e2eceefd8a5

https://www.speedtest.net/result/c/78522092-f4be-47a5-b57e-8282ad329240

https://telegra.ph/How-to-Buy-the-Best-VPS-Server-with-iSegar0-02-01